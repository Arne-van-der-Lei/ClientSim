<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Automated Testing </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Automated Testing ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="automated-testing">
<h1 id="automated-testing">Automated Testing</h1>

<p>ClientSim has many different tests to verify the behaviour of the program. The majority of the tests are Integration tests, but support for Unit tests is available. See Unity’s TestRunner to view all tests. When importing ClientSim as a package, tests can be enabled by adding the following line to the project’s package manifest after the <code>“dependencies” :{}</code> section:</p>
<pre><code class="lang-json">&quot;testables&quot;: [
  &quot;com.unity.inputsystem&quot;,
  &quot;com.vrchat.clientsim&quot;
]
</code></pre>
<p>Once added, Unity will import the tests and you will see them populated in the Test Runner Window.</p>
<p><img src="../images/test-runner.png" alt="Test Runner"></p>
<h2 id="unit-tests">Unit Tests</h2>
<p>ClientSim has a few Unit Tests that can verify items outside of Unity Playmode. More items can be refactored to split away from MonoBehaviours to be more Unit Testable.</p>
<h2 id="integration-tests">Integration Tests</h2>
<p>ClientSim now has a full integration test framework that tests the majority of the features included. This framework allows for sending input events and listening for ClientSim events to verify if the proper action happened. This framework can also be used for worlds to verify specific behaviours, allowing users to create their own tests.</p>
<h3 id="test-setup">Test Setup</h3>
<p>Due to the nature of how ClientSim starts using the InitializeOnLoad, testing requires modifying Unity editor settings to properly validate behaviour. In the test environment, InitializeOnLoad happens before playmode starts. The default Unity setting has Domain Reloading enabled on entering playmode. This means that on switching to playmode, all variable data is cleared. In order to get around this, all ClientSim tests must run with Domain Reloading disabled. This is handled automatically for any test written that derives from either of the two test fixture base classes: ClientSimTestBase and ClientSimWorldTestBase.</p>
<h3 id="test-helpers">Test Helpers</h3>
<p>Both Integration Test Fixtures come with helper methods in verifying specific behaviour.</p>
<ul>
<li><p><strong>ClientSimTestHelpers</strong> - This class contains helper methods to perform useful actions as well as listens to different ClientSim Events to verify actions have occurred.</p>
</li>
<li><p><strong>ClientSimTestInput</strong> - This class allows the user to set the value of any Desktop based Input event.</p>
</li>
</ul>
<h3 id="clientsimtestbase">ClientSimTestBase</h3>
<p>Tests fixtures that derive from this class are for testing individual prefabs and not for testing entire worlds. On test begin, ClientSim’s default behaviour is disabled. It is possible to load a world or spawn a prefab, but ClientSim must be started manually. Depending on the order, behaviour will be different compared to starting ClientSim normally through playmode.</p>
<ol>
<li>If a world or prefab is loaded before starting ClientSim, then any VRC SDK component will not link into ClientSim and start as if ClientSim is disabled. Player spawn points will work as expected in this case as the VRC_SceneDescriptor is needed to start ClientSim and spawn a player.</li>
<li>If a world or prefab is loaded after starting ClientSim, then all VRC SDK components will initialize with ClientSim behaviours as in normal playmode. In this case though, the player will have already spawned and will not be placed at the loaded world’s spawn point.</li>
</ol>
<p>The majority of ClientSim tests are written in this format. A scene with the minimum components needed to start ClientSim is loaded, ClientSim is started, and then from there the tests perform what is needed, such as calling the appropriate SDK API or spawning prefabs while simulating input events.</p>
<p>Here is the list of integration tests:</p>
<h4 id="initialization-tests">Initialization Tests</h4>
<ul>
<li>Test the behaviour of ClientSim startup given different settings and initial scene objects.</li>
</ul>
<h4 id="helper-tests">Helper Tests</h4>
<ul>
<li>Test the behaviour of various ClientSim SDK helper classes. AudioSpatializer, AVProVideoPlayer, ObjectPool, ObjectSync, Udon component without program, UIShape.</li>
</ul>
<h4 id="interact-tests">Interact Tests</h4>
<ul>
<li>Test the interact system for handling interactable objects. Note that since Udon cannot be properly included in packages due to needing external references and are compiled often, this test uses a mock interactable object script</li>
</ul>
<h4 id="pickup-tests">Pickup Tests</h4>
<ul>
<li>Test the interaction system, player hand, and input on different pickup situations.</li>
</ul>
<h4 id="player-api-tests">Player Api Tests</h4>
<ul>
<li>Test behaviour for all exposed methods relating to VRCPlayerApi</li>
</ul>
<h4 id="player-controller-tests">Player Controller Tests</h4>
<ul>
<li>Test Player locomotion settings.</li>
</ul>
<h4 id="station-tests">Station Tests</h4>
<ul>
<li>Tests using stations and expected behaviour with them.</li>
</ul>
<h4 id="ui-tests">UI Tests</h4>
<ul>
<li>Test interactions with Unity UI using the VRC_UIShape component.</li>
</ul>
<h3 id="clientsimworldtestbase">ClientSimWorldTestBase</h3>
<p>Test fixtures that derive from this class are for testing full worlds and verifying the startup of ClientSim for the given world. The test is required to load a given world in the setup phase of the test, and then ClientSim will start normally as it would outside of the test environment by entering playmode. Due to ClientSim being started normally, only one test may be run at a time as playmode is only started once for all tests. If multiple tests are run together, they will all immediately fail with a warning mentioning that only one test can run at a time.</p>
<p>Three World tests are provided by default:</p>
<h4 id="no-world-descriptor">No world descriptor</h4>
<ul>
<li>Test that ClientSim will fail to start if a scene is loaded without a world descriptor</li>
</ul>
<h4 id="two-players">Two Players</h4>
<ul>
<li>Start ClientSim normally in a basic world, spawn a remote player and verify all data on both players.</li>
</ul>
<h4 id="worldtestexample">WorldTestExample</h4>
<ul>
<li>This is an example test showing what it would be like for a user to write tests for their world. Test is included as a Sample for the ClientSim package and must be imported. Test shows how one would verify a simple “Puzzle” world.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
